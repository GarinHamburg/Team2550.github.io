<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Team 2550: Inheritance &amp; Composition</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygenMobile.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Team 2550
   </div>
   <div id="projectbrief">Technical Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="cpp.html">C++</a></li><li class="navelem"><a class="el" href="cppclass.html">Classes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Inheritance &amp; Composition </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#cppclasscomp">Composition</a></li>
<li class="level1"><a href="#cppclassinherit">Inheritance</a><ul><li class="level2"><a href="#cppclassinherituml">UML Diagrams</a></li>
<li class="level2"><a href="#Example"></a></li>
<li class="level2"><a href="#cppclassinheritbase">The Base Class: Shape</a></li>
<li class="level2"><a href="#cppclassinheritchild1">Child Class: Rectangle</a></li>
<li class="level2"><a href="#cppclassinheritfn">Inheritance & Functions</a></li>
<li class="level2"><a href="#cppclassinheritchild2">Child Class: EquilTriangle</a></li>
<li class="level2"><a href="#cppclassinheritvirtual">Virtual Functions</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><b>Inheritance creates an is-a relationship between classes, while composition creates a has-a relationship</b>. In other words, inheritance says, "I am this class with these other things," while composition says "This other class is one of my components."</p>
<h1><a class="anchor" id="cppclasscomp"></a>
Composition</h1>
<p>Composition is the term used for placing an object within a class. Say there are two classes, A and B. If you place an object of type A into the declaration of B, that is composition. </p>
<div class="fragment"><div class="line"><span class="comment">//A struct or a class will work here, both are user-defined datatypes.</span></div>
<div class="line"><span class="keyword">class </span>A {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> someValue;</div>
<div class="line">    <span class="keywordtype">int</span> someOtherValue;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    A();</div>
<div class="line">    A(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b);</div>
<div class="line">    <span class="keywordtype">int</span> getSomeValue();</div>
<div class="line">    <span class="keywordtype">int</span> setSomeValue(<span class="keywordtype">int</span> val);</div>
<div class="line">    <span class="keywordtype">int</span> getSomeOtherValue();</div>
<div class="line">    <span class="keywordtype">int</span> setSomeOtherValue(<span class="keywordtype">int</span> val);</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>B {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> x[10];</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    B();</div>
<div class="line">    A member; <span class="comment">//This is composition, placing one user-defined type within another.</span></div>
<div class="line">};</div>
</div><!-- fragment --><p>You can access values in <code>A</code> from an object of <code>B</code> using the dot operator. </p>
<pre class="fragment">B obj; //When the constructor for B is run, it invokes the constructor for A automatically.
obj.member.setSomeValue(7);
...
</pre><dl class="section note"><dt>Note</dt><dd>Although this particular example is useless, there are still times where composition is necessary and useful.</dd></dl>
<h1><a class="anchor" id="cppclassinherit"></a>
Inheritance</h1>
<p>As was said above, inheritance creates an "is-a" relationship between classes.</p>
<p>Inheritance introduces the need for a new encapsulation level: <code>protected</code>. When a member is <code>private</code>, it is not accessible to a class that inherits it. Members that are labeled <code>protected</code> are accessible by derived classes, but not for general use. In other words, <code>protected</code> members are accessible to methods declared within the derived class, but not when the class is instantiated and used.</p>
<h2><a class="anchor" id="cppclassinherituml"></a>
UML Diagrams</h2>
<p>When you are developing an application that uses inheritance, you usually start with a <b>Universal Modeling Language (UML)</b> diagram. A UML diagram shows the relationship between classes within a program. In other words, it shows what classes are components (composition) or others and when classes inherit others.</p>
<p>The UML syntax is slightly different from that of C++ due to the fact that it is designed to describe multiple programming languages.</p>
<dl class="section note"><dt>Note</dt><dd>I used <a href="http://dia-installer.de/index.html.en">Dia</a> to create the diagrams in this section. It is fairly self-explanatory, but the terminology is slightly different. Notably, member variables are called "attributes" and methods are called "operations".</dd></dl>
<p>Here is a sample class in UML.</p>
<div class="image">
<img src="ExampleClass.svg"  style="width: 40%;" alt="ExampleClass.svg"/>
</div>
<h3>Explanation:</h3>
<ul>
<li>Encapsulation levels are denoted with <code>+</code>, <code>-</code>, or <code>#</code><ul>
<li><code>+</code>: public</li>
<li><code>-</code>: private</li>
<li><code>#</code>: protected</li>
</ul>
</li>
<li>Member variables follow a <code>name: type = value</code> syntax. The <code>type</code> and <code>= value</code> parts are optional.</li>
<li>Composition is denoted with a diamond pointing at the component type declaration. In this case, it is the Point struct.</li>
<li>Member variables are in the top section, and methods are in the bottom. In Dia, you can choose to hide either, as I did in the struct.</li>
<li>Methods follow a different syntax: <code>method(arg1:type, arg2:type = value): ReturnType</code><ul>
<li>Parameters are optional, and are formatted like members</li>
<li>The return type is shown after the name and parameters</li>
</ul>
</li>
<li>As you will see below, classes that inherit another class are shown with an arrow pointing to the class they inherit</li>
</ul>
<h2><a class="anchor" id="Example"></a>
Example</h2>
<p>The best way to show how inheritance works is to use it. For this reason, we will implement a class that contains shape properties, and then use inheritance to create classes that correspond to specific shapes. Many graphics libraries (often used to create games) have something similar to this. Note that this example will require basic trigonometry skills (applications of sine, cosine, and tangent).</p>
<div class="image">
<img src="ShapeClass.svg" alt="ShapeClass.svg"/>
<div class="caption">
Here is the UML inheritance diagram showing the relation between the Shape class and its decedents and components.</div></div>
 <dl class="section note"><dt>Note</dt><dd>The default constructor for each class is implied.</dd></dl>
<h2><a class="anchor" id="cppclassinheritbase"></a>
The Base Class: Shape</h2>
<p>Here is the declaration and implementation of the <code>Shape</code> class.</p>
<h3>FILE: Shape.hh</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef SHAPE_HH</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define SHAPE_HH</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keyword">class </span>Point2d {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    Point2d();</div>
<div class="line">    Point2d(<span class="keywordtype">int</span> xValue, <span class="keywordtype">int</span> yValue);</div>
<div class="line">    <span class="keywordtype">int</span> x;</div>
<div class="line">    <span class="keywordtype">int</span> y;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>Shape {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> layer;</div>
<div class="line">    Point2d location;</div>
<div class="line">    <span class="keywordtype">int</span> angleDeg;</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">float</span> width;</div>
<div class="line">    <span class="keywordtype">float</span> height;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    Shape();</div>
<div class="line">    Shape(<span class="keywordtype">float</span> w, <span class="keywordtype">float</span> h, Point2d loc, <span class="keywordtype">int</span> angle);</div>
<div class="line">    <span class="comment">//Mutators</span></div>
<div class="line">    <span class="keywordtype">void</span> setLayer(<span class="keywordtype">int</span> l);</div>
<div class="line">    <span class="keywordtype">void</span> setWidth(<span class="keywordtype">float</span> w);</div>
<div class="line">    <span class="keywordtype">void</span> setHeight(<span class="keywordtype">float</span> h);</div>
<div class="line">    <span class="keywordtype">void</span> setLocation(Point2d loc);</div>
<div class="line">    <span class="keywordtype">void</span> chgLocation(Point2d delta);</div>
<div class="line">    <span class="keywordtype">void</span> setRotation(<span class="keywordtype">int</span> degrees);</div>
<div class="line">    <span class="keywordtype">void</span> chgRotation(<span class="keywordtype">int</span> degrees);</div>
<div class="line">    <span class="comment">//Accessors</span></div>
<div class="line">    <span class="keywordtype">int</span> getLayer();</div>
<div class="line">    <span class="keywordtype">float</span> getWidth();</div>
<div class="line">    <span class="keywordtype">float</span> getHeight();</div>
<div class="line">    Point2d getLocation();</div>
<div class="line">    <span class="keywordtype">int</span> getRotation();</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><code>width</code> and <code>height</code> are protected because other classes may need access to them.</dd></dl>
<h3>FILE: Shape.cc</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Shape.hh&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">//Point2d would more efficient as a struct, but here it is a class</span></div>
<div class="line"><span class="comment">//in order to demonstrate the behavior of constructors when using</span></div>
<div class="line"><span class="comment">//composition.</span></div>
<div class="line"></div>
<div class="line">Point2d::Point2d() {</div>
<div class="line">    x = 0;</div>
<div class="line">    y = 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">Point2d::Point2d(<span class="keywordtype">int</span> xValue, <span class="keywordtype">int</span> yValue) {</div>
<div class="line">    x = xValue;</div>
<div class="line">    y = yValue;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">Shape::Shape() {</div>
<div class="line">    layer = 0;</div>
<div class="line">    angleDeg = 0;</div>
<div class="line">    width = 1;</div>
<div class="line">    height = 1;</div>
<div class="line">    <span class="comment">//The default Point2d constructor is run automatically.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">Shape::Shape(<span class="keywordtype">float</span> w, <span class="keywordtype">float</span> h, Point2d loc, <span class="keywordtype">int</span> angle) {</div>
<div class="line">    layer = 0;</div>
<div class="line">    width = w;</div>
<div class="line">    height = h;</div>
<div class="line">    location = loc;</div>
<div class="line">    setRotation(angle);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Shape::setLayer(<span class="keywordtype">int</span> l) {</div>
<div class="line">    layer = l;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Shape::setWidth(<span class="keywordtype">float</span> w) {</div>
<div class="line">    width = w;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Shape::setHeight(<span class="keywordtype">float</span> h) {</div>
<div class="line">    height = h;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Shape::setLocation(Point2d loc) {</div>
<div class="line">    location.x = loc.x;</div>
<div class="line">    location.y = loc.y;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Shape::chgLocation(Point2d delta) {</div>
<div class="line">    location.x += delta.x;</div>
<div class="line">    location.y += delta.y;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Shape::setRotation(<span class="keywordtype">int</span> degrees) {</div>
<div class="line">    angleDeg = degrees % 360;</div>
<div class="line">    <span class="comment">//An angle modded by 360 makes sure that its value is between 0 and 359</span></div>
<div class="line">    <span class="comment">//this means that we don&#39;t have to calculate multiple rotations later on.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Shape::chgRotation(<span class="keywordtype">int</span> degrees) {</div>
<div class="line">    angleDeg += degrees;</div>
<div class="line">    angleDeg %= 360;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> Shape::getLayer() {</div>
<div class="line">    <span class="keywordflow">return</span> layer;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> Shape::getWidth() {</div>
<div class="line">    <span class="keywordflow">return</span> width;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> Shape::getHeight() {</div>
<div class="line">    <span class="keywordflow">return</span> height;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> Shape::getRotation() {</div>
<div class="line">    <span class="keywordflow">return</span> angleDeg;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">Point2d Shape::getLocation() {</div>
<div class="line">    <span class="keywordflow">return</span> location;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="cppclassinheritchild1"></a>
Child Class: Rectangle</h2>
<p>Here is the declaration and implementation of a very simple child class, <code>Rectangle</code>. The only additional methods it supplies are <code>area()</code> and <code>perimeter()</code>.</p>
<h3>FILE: Rectangle.hh</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef RECTANGLE_HH</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define RECTANGLE_HH</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &quot;Shape.hh&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>Rectangle : <span class="keyword">public</span> Shape {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    Rectangle();</div>
<div class="line">    Rectangle(<span class="keywordtype">float</span> w, <span class="keywordtype">float</span> h, Point2d loc, <span class="keywordtype">int</span> angle);</div>
<div class="line">    <span class="keywordtype">int</span> area();</div>
<div class="line">    <span class="keywordtype">int</span> perimeter();</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The encapsulation level before the name of the base class is important. It is the highest level that a member from <code>Shape</code> can be in a <code>Rectangle</code> object. In other words, if <code>public Shape</code> were changed to <code>private Shape</code>, all of the members that were previously public and protected would be private in the child class. Generally speaking, this is not what you want, and if you want to restrict the access to inherited members, composition is typically the way to go. This does not reduce the protection of any members - inheriting a class as public means that previously public members are public, protected members are protected, and private members are private.</dd></dl>
<h3>FILE: Rectangle.cc</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Rectangle.hh&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">//All other methods are defined in Shape. You can call any of Shape&#39;s methods</span></div>
<div class="line"><span class="comment">//for a Rectangle object.</span></div>
<div class="line"></div>
<div class="line">Rectangle::Rectangle() {</div>
<div class="line">    <span class="comment">//The Shape default constructor is automatically run here.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">Rectangle::Rectangle(<span class="keywordtype">float</span> w, <span class="keywordtype">float</span> h, Point2d loc, <span class="keywordtype">int</span> angle) :</div>
<div class="line">    Shape(w, h, loc, angle) <span class="comment">//This is an alternative to the default constructor (see below).</span></div>
<div class="line">{}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> Rectangle::area() {</div>
<div class="line">    <span class="keywordflow">return</span> width * height;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> Rectangle::perimeter() {</div>
<div class="line">    <span class="keywordflow">return</span> (2 * width) + (2 * height);</div>
<div class="line">}</div>
</div><!-- fragment --><p><code>: Shape(w, h, loc, angle)</code> bypasses the default constructor. In this case, the arguments of the <code>Rectangle</code> constructor are passed to the <code>Shape</code> constructor. This prevents members of the new class from being set twice.</p>
<dl class="section note"><dt>Note</dt><dd>It is also possible to put <code>using Shape::Shape;</code> in the class declaration in order to inherit the constructors from Shape, but this is a relatively new feature of C++ and is not supported everywhere. For now, it is best to use the method shown above to pass arguments to non-default constructors.</dd></dl>
<p>For demonstration purposes, here is a simple test file. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Rectangle.hh&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    Rectangle r;</div>
<div class="line">    <span class="comment">//The following line demonstrates how inheritance works:</span></div>
<div class="line">    <span class="comment">//getLocation is a method in Shape, but it is being called from a Rectangle object.</span></div>
<div class="line">    cout &lt;&lt; r.getLocation().x &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; r.getLocation().y &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    r.setWidth(3);</div>
<div class="line">    r.setHeight(2);</div>
<div class="line">    <span class="comment">//Call a method that only exists in Rectangle</span></div>
<div class="line">    cout &lt;&lt; r.area();</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="cppclassinheritfn"></a>
Inheritance &amp; Functions</h2>
<p>Inheritance also provides a benefit when you are passing a class into a function. You can pass child classes into a function meant for the base class. In other words, you can pass a <code>Rectangle</code> into a function requiring a <code>Shape</code> argument. This makes since, a Rectangle will have no less than a Shape (assuming that it inherited Shape as public).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Rectangle.hh&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> printShape(Shape s);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    Rectangle r;</div>
<div class="line">    printShape(r);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> printShape(Shape s) {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Angle: &quot;</span> &lt;&lt; s.getRotation() &lt;&lt; <span class="stringliteral">&quot; Layer: &quot;</span> &lt;&lt; s.getLayer() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Location: &quot;</span> &lt;&lt; s.getLocation().x &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; s.getLocation().y &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Width: &quot;</span> &lt;&lt; s.getWidth() &lt;&lt; <span class="stringliteral">&quot; Height: &quot;</span> &lt;&lt; s.getHeight() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Output</h3>
<pre class="fragment">Angle: 0 Layer: 0
Location: 0 0
Width: 1 Height: 1    
</pre><p>Note that <code>r</code> is a <code>Rectangle</code> and the function's parameter type is a <code>Shape</code>. This would cause a compiler error if you set the encapsulation level when <code>Rectangle</code> inherited <code>Shape</code> were something other than <code>public</code>.</p>
<dl class="section note"><dt>Note</dt><dd>There is a more efficient way to write this function. See <a class="el" href="cppclassfn.html#cppclassfnconst">const functions</a>.</dd></dl>
<h2><a class="anchor" id="cppclassinheritchild2"></a>
Child Class: EquilTriangle</h2>
<p>Unlike a rectangle (or most shapes, for that matter), an equilateral triangle has to have the same width and height. This presents a problem when inheriting from the <code>Shape</code> class: the user is able to set the width and height individually. Fortunately, we can redefine member functions within the base class in the child. Let's create an equilateral triangle class, called <code>EquilTriangle</code>, that makes sure the width and height maintain the correct ratio. First, we'll have to use some geometry/trigonometry to determine the ratio between the width and height of an equilateral triangle.</p>
<div class="image">
<img src="EquilTriangle.svg" alt="EquilTriangle.svg"/>
</div>
<p>The above diagram gives us one very important piece of information: the ratio between the width and height of an equilateral triangle is: 0.866025403784. In other words: </p>
<pre class="fragment">height = 0.866025403784 * width
width = height / 0.866025403784
</pre><h3>FILE: EquilTriangle.hh</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef EQUILTRIANGLE_HH</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define EQUILTRIANGLE_HH</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &quot;Shape.hh&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>EquilTriangle : <span class="keyword">public</span> Shape {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    EquilTriangle();</div>
<div class="line">    EquilTriangle(<span class="keywordtype">float</span> w, Point2d loc, <span class="keywordtype">int</span> angle);</div>
<div class="line">    <span class="keywordtype">void</span> setWidth(<span class="keywordtype">float</span> w);</div>
<div class="line">    <span class="keywordtype">void</span> setHeight(<span class="keywordtype">float</span> h);</div>
<div class="line">    <span class="keywordtype">float</span> area();</div>
<div class="line">    <span class="keywordtype">float</span> perimeter();</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><p>Note that the above declaration redefines <code>setHeight</code> and <code>setWidth</code>.</p>
<h3>FILE: EquilTriangle.cc</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;EquilTriangle.hh&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> EquilTriangle_ratio = 0.866025403784;</div>
<div class="line"></div>
<div class="line">EquilTriangle::EquilTriangle() {</div>
<div class="line">    height = EquilTriangle_ratio * width;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">EquilTriangle::EquilTriangle(<span class="keywordtype">float</span> w, Point2d loc, <span class="keywordtype">int</span> angle) :</div>
<div class="line">    Shape(w, EquilTriangle_ratio * w, loc, angle)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//This constructor is a fairly special case. Because the height depends on</span></div>
<div class="line">    <span class="comment">//the width, we can&#39;t have the user provide both arguments. The Shape</span></div>
<div class="line">    <span class="comment">//constructor has to be run given a width value, and then use the ratio</span></div>
<div class="line">    <span class="comment">//we created earlier to determine the height.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> EquilTriangle::setWidth(<span class="keywordtype">float</span> w) {</div>
<div class="line">    width = w;</div>
<div class="line">    height = EquilTriangle_ratio * width;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> EquilTriangle::setHeight(<span class="keywordtype">float</span> h) {</div>
<div class="line">    height = h;</div>
<div class="line">    width = height / EquilTriangle_ratio;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> EquilTriangle::area() {</div>
<div class="line">    <span class="keywordflow">return</span> (width * height) / 2;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> EquilTriangle::perimeter() {</div>
<div class="line">    <span class="keywordflow">return</span> 3 * width;</div>
<div class="line">}</div>
</div><!-- fragment --><p>There is almost nothing new here, so let's run a test program... </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;EquilTriangle.hh&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> printShape(Shape s);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    EquilTriangle t(2, Point2d(1, 0), 0);</div>
<div class="line">    printShape(t);</div>
<div class="line">    t.setWidth(3); <span class="comment">//Runs EquilTriangle::setWidth</span></div>
<div class="line">    printShape(t);</div>
<div class="line">    t.Shape::setHeight(5); <span class="comment">//Runs Shape::setHeight</span></div>
<div class="line">    printShape(t);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> printShape(Shape s) {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Angle: &quot;</span> &lt;&lt; s.getRotation() &lt;&lt; <span class="stringliteral">&quot; Layer: &quot;</span> &lt;&lt; s.getLayer() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Location: &quot;</span> &lt;&lt; s.getLocation().x &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; s.getLocation().y &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Width: &quot;</span> &lt;&lt; s.getWidth() &lt;&lt; <span class="stringliteral">&quot; Height: &quot;</span> &lt;&lt; s.getHeight() &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Output</h3>
<pre class="fragment">Angle: 0 Layer: 0
Location: 1 0
Width: 2 Height: 1.73205

Angle: 0 Layer: 0
Location: 1 0
Width: 3 Height: 2.59808

Angle: 0 Layer: 0
Location: 1 0
Width: 3 Height: 5
</pre><p>As you can see, the program worked. However, running <code>Shape::setHeight</code> defeats the purpose of this class, to keep the width and height at a constant ratio. This is not always the case, and there are situations where accessing the original function (not the redefined version) can be useful.</p>
<h2><a class="anchor" id="cppclassinheritvirtual"></a>
Virtual Functions</h2>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; margin:7px 0px" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
     </li>
     <li class="footer"><a href="http://team2550.github.io/">Desktop Site</a></li>
  </ul>
</div>
</body>
</html>
