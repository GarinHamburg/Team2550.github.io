<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Team 2550: Dynamic Arrays</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygenMobile.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Team 2550
   </div>
   <div id="projectbrief">Technical Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Dynamic Arrays </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#cppmemnew">The new Operator</a></li>
<li class="level1"><a href="#cppmemdel">The delete Operator</a></li>
<li class="level1"><a href="#cppmemarralloc">Array Allocation</a></li>
</ul>
</div>
<div class="textblock"><p>At some point, arrays become too big to store on the stack. This is called stack overflow.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> overflow(<span class="keywordtype">double</span> x);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    overflow(0);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//For demonstration purposes, this function uses recusion.</span></div>
<div class="line"><span class="keywordtype">void</span> overflow(<span class="keywordtype">double</span> x) {</div>
<div class="line">    <span class="keywordtype">int</span> a[1000][500];</div>
<div class="line">    cout &lt;&lt; x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    overflow(x + 1);</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Output</h3>
<pre class="fragment">0
1
2
3
Segmentation fault (core dumped)
</pre><dl class="section note"><dt>Note</dt><dd>A recursive function is a function that calls itself in order to reduce the complexity of a problem. They can take up a lot of stack space as every function call is placed on the stack. The video below explains recursion fairly well.  
<iframe width="560" height="315" src="http://www.youtube.com/embed/Mv9NEXX1VHc" frameborder="0" allowfullscreen></iframe>
</dd></dl>
<h1><a class="anchor" id="cppmemnew"></a>
The new Operator</h1>
<p>In order to dynamically allocate a value, you have to use the <code>new</code> operator &ndash; it dynamically allocates a block of memory and then returns a pointer to that location.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span>* x = <span class="keyword">new</span> int;</div>
<div class="line">*x = 73;</div>
<div class="line">cout &lt;&lt; &amp;x &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; *x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
</div><!-- fragment --><h3>Output</h3>
<pre class="fragment">0x7fff82376378 73
</pre><dl class="section warning"><dt>Warning</dt><dd>Every <code>new</code> operation must have a corresponding <code>delete</code>. Read about that in the next section.</dd></dl>
<h1><a class="anchor" id="cppmemdel"></a>
The delete Operator</h1>
<p>The <code>delete</code> operator de-allocates memory.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="keywordtype">int</span>* x = <span class="keyword">new</span> int;</div>
<div class="line">    *x = 38;</div>
<div class="line">    cout &lt;&lt; *x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    <span class="keyword">delete</span> x;</div>
<div class="line">    cout &lt;&lt; *x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Output</h3>
<pre class="fragment">38
0
</pre><p>There is one problem in the above code. Look at the output, the second value is 0. However, this could easily be something else. <code>delete</code> de-allocates the memory so that it can be overwritten by the operating system. It is always best to assign the pointer to some other location of <code>NULL</code>.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="keywordtype">int</span>* x = <span class="keyword">new</span> int;</div>
<div class="line">    *x = 38;</div>
<div class="line">    cout &lt;&lt; *x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    <span class="keyword">delete</span> x;</div>
<div class="line">    cout &lt;&lt; *x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">    x = NULL;</div>
<div class="line">    cout &lt;&lt; *x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Output</h3>
<pre class="fragment">38
0
Segmentation fault (core dumped)
</pre><dl class="section note"><dt>Note</dt><dd>The segmentation fault is good in this case &ndash; it allows for easier debugging.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd><code>delete</code> is necessary when working with dynamic memory. Failure to do so will a <b>memory leak</b>. A memory leak occurs when a pointer pointing to dynamic memory is changed or inaccessible. For instance, a function that does not use the delete operator on an internal pointer. You can no longer access that value, and the system cannot take it back. This can cause problems if your program uses a large amount of memory.</dd></dl>
<h1><a class="anchor" id="cppmemarralloc"></a>
Array Allocation</h1>
<p>Arrays can be allocated easily. Just use the <code>new</code> and <code>delete</code> operators.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span>* x = <span class="keyword">new</span> <span class="keywordtype">int</span>[10000][100];</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0; margin:7px 0px" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
     </li>
     <li class="footer"><a href="http://team2550.github.io/">Desktop Site</a></li>
  </ul>
</div>
</body>
</html>
